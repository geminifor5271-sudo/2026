<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>F1 SHANGHAI 2026</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#050505">
    <link rel="manifest" href="manifest.json">
    
    <style>
        :root {
            --bg: #050505; --surface: #121212; --on-surface: #1c1c1e;
            --primary: #ff1e00; --text-p: #ffffff; --text-s: #8e8e93;
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Inter', sans-serif; overflow: hidden; height: 100dvh; display: flex; flex-direction: column; }

        /* Header */
        header { padding: 55px 20px 15px; background: linear-gradient(to bottom, #250505, var(--bg)); flex-shrink: 0; }
        header h1 { margin: 0; font-size: 24px; font-weight: 900; font-style: italic; }
        header h1 span { color: var(--primary); }

        /* Pages */
        .page-container { flex: 1; position: relative; overflow: hidden; }
        .main-page { position: absolute; width: 100%; height: 100%; display: none; flex-direction: column; animation: fadeIn 0.3s ease; }
        .main-page.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Schedule Tabs */
        .day-nav { display: flex; gap: 10px; padding: 10px 20px; overflow-x: auto; scrollbar-width: none; flex-shrink: 0; }
        .day-tab { flex: 0 0 auto; padding: 10px 18px; border-radius: 12px; background: var(--surface); color: var(--text-s); font-size: 13px; font-weight: 700; }
        .day-tab.active { background: var(--primary); color: white; }

        .scroll-content { flex: 1; overflow-y: auto; padding: 10px 20px 120px; }

        /* Cards */
        .info-card { background: var(--surface); padding: 18px; border-radius: 20px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.03); }
        .info-card:active { background: #1a1a1c; }
        .card-body h3 { margin: 0; font-size: 16px; }
        .card-body p { margin: 5px 0 0; font-size: 12px; color: var(--text-s); }

        /* Timeline Items */
        .timeline-item { display: flex; gap: 15px; margin-bottom: 20px; position: relative; }
        .time-mark { flex: 0 0 40px; text-align: center; font-size: 11px; font-weight: 800; color: var(--text-s); }
        .time-dot { width: 10px; height: 10px; background: #333; border-radius: 50%; margin: 8px auto; border: 2px solid var(--bg); }
        .timeline-item.active .time-dot { background: var(--primary); box-shadow: 0 0 10px var(--primary); }

        /* Bottom Nav */
        .bottom-nav { background: rgba(18, 18, 18, 0.95); backdrop-filter: blur(20px); border-top: 1px solid #222; display: flex; padding: 10px 0 var(--safe-bottom); position: fixed; bottom: 0; width: 100%; }
        .nav-btn { background: none; border: none; color: var(--text-s); flex: 1; display: flex; flex-direction: column; align-items: center; font-size: 10px; font-weight: 600; gap: 5px; }
        .nav-btn.active { color: var(--primary); }

        /* Detail Sheet */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; z-index: 1500; }
        #detail-sheet { position: fixed; bottom: -100%; left: 0; width: 100%; height: 80%; background: #1c1c1e; border-radius: 30px 30px 0 0; z-index: 2000; transition: 0.4s cubic-bezier(0.16, 1, 0.3, 1); padding: 40px 25px; overflow-y: auto; }
        #detail-sheet.open { bottom: 0; }
        .tag { display: inline-block; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 800; margin-right: 5px; margin-bottom: 10px; }
        .tag-red { background: rgba(255,30,0,0.2); color: var(--primary); }
        .tag-blue { background: rgba(0,122,255,0.2); color: #007aff; }
    </style>
</head>
<body>

    <header><h1>SHANGHAI <span>GP</span></h1></header>

    <div class="page-container">
        <div id="page-schedule" class="main-page active">
            <div class="day-nav" id="day-nav"></div>
            <div class="scroll-content" id="schedule-list"></div>
        </div>

        <div id="page-track" class="main-page">
            <div class="scroll-content">
                <div class="info-card">
                    <div class="card-body">
                        <span class="tag tag-red">âš ï¸ å®‰å…¨æª¢æŸ¥</span>
                        <h3>å®‰æª¢ç¦å¸¶ç‰©å“</h3>
                        <p>ç¦æ­¢æ”œå¸¶ï¼šå°ˆæ¥­ç›¸æ©Ÿè…³æ¶ã€è¶…é 2 å…¬å‡çš„æ¶²é«”ã€ç»ç’ƒç“¶ã€é•·æŸ„é›¨å‚˜ã€ç„¡äººæ©Ÿã€ä»»ä½•æ˜“ç‡ƒç‰©å“ã€‚</p>
                    </div>
                </div>
                <div class="info-card">
                    <div class="card-body">
                        <span class="tag tag-blue">ğŸªª å¿…è¦è­‰ä»¶</span>
                        <h3>è§€è³½èº«åˆ†æ ¸é©—</h3>
                        <p>ä¸Šæµ· F1 æ¡å¯¦ååˆ¶ã€‚è§€è³½ç•¶å¤©å‹™å¿…éš¨èº«æ”œå¸¶ **å°èƒè­‰æ­£æœ¬**ã€‚ç¾å ´åƒ…åˆ·è­‰ä»¶é€²å…¥ï¼Œä¸æ¥å—æˆªåœ–ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-food" class="main-page">
            <div class="scroll-content">
                <h2>æ”¯ä»˜å·¥å…·æº–å‚™</h2>
                <div class="info-card">
                    <div class="card-body">
                        <h3>æ”¯ä»˜å¯¶ / å¾®ä¿¡æ”¯ä»˜</h3>
                        <p>è³½å ´å…§ 99% æ”¤ä½ä¸æ”¶ç¾é‡‘ã€‚å»ºè­°é å…ˆç¶å®šå°ç£ä¿¡ç”¨å¡ï¼Œä¸¦å®Œæˆå¯¦åèªè­‰ã€‚</p>
                    </div>
                </div>
                <div class="info-card">
                    <div class="card-body">
                        <h3>åœ°éµï¼šå¤§éƒ½æœƒ App</h3>
                        <p>ä¸‹è¼‰ã€Œä¸å¯æˆ–ç¼ºã€ã€‚æˆ–ç›´æ¥åœ¨æ”¯ä»˜å¯¶å…§æœå°‹ã€Œä¸Šæµ·å…¬çœ¾äº¤é€šä¹˜è»Šç¢¼ã€ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-settings" class="main-page">
            <div class="scroll-content">
                <h2>App è¨­å®š</h2>
                <div class="info-card" onclick="toggleHaptic()">
                    <div class="card-body" style="display:flex; justify-content:space-between; align-items:center;">
                        <div>
                            <h3>è§¸è¦ºå›é¥‹</h3>
                            <p id="haptic-status">ç›®å‰ç‹€æ…‹ï¼šé–‹å•Ÿ (éœ‡å‹• 15ms)</p>
                        </div>
                        <input type="checkbox" checked id="haptic-toggle">
                    </div>
                </div>
                <div class="info-card" onclick="location.reload()">
                    <div class="card-body">
                        <h3>æ‰‹å‹•æª¢æŸ¥æ›´æ–°</h3>
                        <p>å¼·åˆ¶é‡æ–°å¾ GitHub æŠ“å–æœ€æ–°å…§å®¹</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <button class="nav-btn active" onclick="nav('schedule', this)"><span>ğŸ—“ï¸</span>è¡Œç¨‹</button>
        <button class="nav-btn" onclick="nav('track', this)"><span>ğŸï¸</span>è³½é“</button>
        <button class="nav-btn" onclick="nav('food', this)"><span>ğŸ’³</span>æ”¯ä»˜</button>
        <button class="nav-btn" onclick="nav('settings', this)"><span>âš™ï¸</span>è¨­å®š</button>
    </nav>

    <div class="overlay" onclick="closeSheet()"></div>
    <div id="detail-sheet">
        <div class="sheet-handle"></div>
        <div id="sheet-content"></div>
        <button onclick="closeSheet()" style="width:100%; padding:18px; border-radius:16px; border:none; background:#2c2c2e; color:white; font-weight:bold; margin-top:20px">é—œé–‰</button>
    </div>

    <script>
        let isHapticOn = true;
        const scheduleData = {
            d1: [
                { time: '12:45', title: 'æŠµé”è™¹æ©‹æ©Ÿå ´', icon: 'ğŸ›«', detail: 'æ”¯ä»˜å»ºè­°ï¼šå‡ºé—œå¾Œç¬¬ä¸€ä»¶äº‹åœ¨æ”¯ä»˜å¯¶é–‹å•Ÿã€Œä¹˜è»Šç¢¼ã€ã€‚<br>é ä¼°æ™‚é–“ï¼šä¸‹æ©Ÿåˆ°é€²å¸‚å€ç´„ 60 åˆ†é˜ã€‚', tags: ['å°èƒè­‰'] },
                { time: '15:00', title: 'é£¯åº— Check-in', icon: 'ğŸ¨', detail: 'éœ€å‡ºç¤ºå°èƒè­‰ä¾›é£¯åº—è¾¦ç†ä½å®¿ç™»è¨˜ï¼ˆå…¬å®‰å‚™æ¡ˆï¼‰ã€‚', tags: ['æ”¯ä»˜å¯¶'] }
            ],
            d2: [
                { time: '10:00', title: 'å‰å¾€è³½è»Šå ´', icon: 'ğŸš‡', detail: 'äº¤é€šï¼šåœ°éµ 11 è™Ÿç·šã€‚é ä¼° 60-90 åˆ†é˜ã€‚<br>å®‰æª¢ï¼šé€²ç«™éœ€æª¢æŸ¥éš¨èº«åŒ…è¢‹ã€‚', tags: ['åœ°éµ', 'å®‰æª¢'] },
                { time: '11:30', title: 'FP1 ç·´ç¿’è³½', icon: 'ğŸï¸', detail: 'å»ºè­°æ”œå¸¶è€³å¡ã€é˜²æ›¬ä¹³ã€‚å ´å…§è²·æ°´ç´„ 10-15 å…ƒäººæ°‘å¹£ã€‚', tags: ['å¯¦ååˆ¶'] }
            ]
            // ... æ›´å¤šå¤©æ•¸å¯è‡ªè¡Œæ“´å……
        };

        function haptic(ms) { if (isHapticOn && navigator.vibrate) navigator.vibrate(ms); }

        function toggleHaptic() {
            isHapticOn = !isHapticOn;
            document.getElementById('haptic-toggle').checked = isHapticOn;
            document.getElementById('haptic-status').innerText = `ç›®å‰ç‹€æ…‹ï¼š${isHapticOn ? 'é–‹å•Ÿ (éœ‡å‹• 15ms)' : 'å·²é—œé–‰'}`;
            if(isHapticOn) haptic(30);
        }

        function nav(id, btn) {
            haptic(15);
            document.querySelectorAll('.main-page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function renderDayNav() {
            const days = { d1: '12 Thu', d2: '13 Fri', d3: '14 Sat', d4: '15 Sun', d5: '16 Mon' };
            const nav = document.getElementById('day-nav');
            nav.innerHTML = Object.entries(days).map(([key, label]) => 
                `<div class="day-tab ${key === 'd1' ? 'active' : ''}" onclick="switchDay('${key}', this)">${label}</div>`
            ).join('');
        }

        function switchDay(dayId, btn) {
            haptic(10);
            document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
            btn.classList.add('active');
            renderEvents(dayId);
        }

        function renderEvents(day) {
            const list = document.getElementById('schedule-list');
            const events = scheduleData[day] || [];
            list.innerHTML = events.map(e => `
                <div class="timeline-item active" onclick="openSheet('${e.title}', '${e.detail}', '${e.tags}')">
                    <div class="time-mark">${e.time}<div class="time-dot"></div></div>
                    <div class="info-card">
                        <div class="card-body">
                            <h3>${e.icon} ${e.title}</h3>
                            <p>${e.tags.map(t => '#' + t).join(' ')}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function openSheet(title, detail, tags) {
            haptic(20);
            const tagHtml = tags.split(',').map(t => `<span class="tag tag-red">${t}</span>`).join('');
            document.getElementById('sheet-content').innerHTML = `
                ${tagHtml}
                <h2 style="margin: 10px 0">${title}</h2>
                <div style="line-height:1.6; color:#ccc; font-size:15px">${detail}</div>
            `;
            document.getElementById('detail-sheet').classList.add('open');
            document.querySelector('.overlay').style.display = 'block';
        }

        function closeSheet() {
            document.getElementById('detail-sheet').classList.remove('open');
            document.querySelector('.overlay').style.display = 'none';
        }

        window.onload = () => { renderDayNav(); renderEvents('d1'); };
    </script>
</body>
</html>
